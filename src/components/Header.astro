---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';
---

<header>
	<nav>
		<div class="nav-brand">
			<h2><a href="/">{SITE_TITLE}</a></h2>
		</div>
		
		<!-- Desktop menu -->
		<div class="nav-links desktop-only">
			<HeaderLink href="/">Home</HeaderLink>
			<HeaderLink href="/articles">Articles</HeaderLink>
			<HeaderLink href="/projects">Projects</HeaderLink>
			<HeaderLink href="/about">About</HeaderLink>
		</div>
		
		<!-- Mobile menu button -->
		<button class="mobile-menu-btn" id="mobileMenuBtn" aria-label="Open mobile menu">
			<span></span>
			<span></span>
			<span></span>
		</button>
	</nav>
	
	<!-- Mobile menu overlay -->
	<div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
	
	<!-- Mobile menu -->
	<div class="mobile-menu" id="mobileMenu">
		<div class="mobile-menu-header">
			<h3>Menu</h3>
			<button class="close-btn" id="closeMobileMenu" aria-label="Close mobile menu">
				<svg width="24" height="24" viewBox="0 0 24 24" fill="none">
					<path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
				</svg>
			</button>
		</div>
		<div class="mobile-menu-content">
			<HeaderLink href="/">Home</HeaderLink>
			<HeaderLink href="/articles">Articles</HeaderLink>
			<HeaderLink href="/projects">Projects</HeaderLink>
			<HeaderLink href="/about">About</HeaderLink>
		</div>
	</div>
</header>

<script>
	// Mobile menu functionality
	const mobileMenuBtn = document.getElementById('mobileMenuBtn');
	const mobileMenu = document.getElementById('mobileMenu');
	const mobileMenuOverlay = document.getElementById('mobileMenuOverlay');
	const closeMobileMenu = document.getElementById('closeMobileMenu');
	
	function openMobileMenu() {
		if (mobileMenu && mobileMenuOverlay && mobileMenuBtn) {
			mobileMenu.classList.add('open');
			mobileMenuOverlay.classList.add('open');
			mobileMenuBtn.classList.add('open');
			document.body.style.overflow = 'hidden';
			mobileMenuBtn.setAttribute('aria-expanded', 'true');
		}
	}
	
	function closeMobileMenuFunc() {
		if (mobileMenu && mobileMenuOverlay && mobileMenuBtn) {
			mobileMenu.classList.remove('open');
			mobileMenuOverlay.classList.remove('open');
			mobileMenuBtn.classList.remove('open');
			document.body.style.overflow = '';
			mobileMenuBtn.setAttribute('aria-expanded', 'false');
		}
	}
	
	// Event listeners
	if (mobileMenuBtn) {
		mobileMenuBtn.addEventListener('click', openMobileMenu);
	}
	
	if (closeMobileMenu) {
		closeMobileMenu.addEventListener('click', closeMobileMenuFunc);
	}
	
	if (mobileMenuOverlay) {
		mobileMenuOverlay.addEventListener('click', closeMobileMenuFunc);
	}
	
	// Close menu when clicking on a link
	if (mobileMenu) {
		const menuLinks = mobileMenu.querySelectorAll('a');
		menuLinks.forEach(link => {
			link.addEventListener('click', closeMobileMenuFunc);
		});
	}
	
	// Keyboard support
	document.addEventListener('keydown', (event) => {
		if (event.key === 'Escape' && mobileMenu?.classList.contains('open')) {
			closeMobileMenuFunc();
			mobileMenuBtn?.focus();
		}
	});
</script>
<style>
	/* Base styles */
	header {
		margin: 0;
		padding: 0;
		background: white;
		box-shadow: 0 2px 8px rgba(var(--black), 5%);
		position: sticky;
		top: 0;
		z-index: 1000;
	}
	
	nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
		min-height: 64px;
		padding: 0 1rem;
		max-width: 1200px;
		margin: 0 auto;
	}
	
	.nav-brand h2 {
		margin: 0;
		font-size: 1.25rem;
		font-weight: 700;
	}

	.nav-brand h2 a {
		text-decoration: none;
		color: rgb(var(--black));
		transition: color 0.2s ease;
	}

	.nav-brand h2 a:hover {
		color: rgb(var(--accent));
	}
	
	/* Desktop navigation */
	.nav-links {
		display: flex;
		align-items: center;
		gap: 0.25rem;
	}
	
	.nav-links a {
		padding: 0.75rem 1rem;
		color: rgb(var(--black));
		border-bottom: 2px solid transparent;
		text-decoration: none;
		font-weight: 500;
		transition: all 0.2s ease;
		border-radius: 6px 6px 0 0;
	}
	
	.nav-links a:hover {
		color: rgb(var(--accent));
		background: rgba(var(--accent), 0.05);
		border-bottom-color: rgba(var(--accent), 0.3);
	}
	
	.nav-links a.active {
		color: rgb(var(--accent));
		border-bottom-color: rgb(var(--accent));
		background: rgba(var(--accent), 0.08);
	}

	/* Mobile menu button */
	.mobile-menu-btn {
		display: none;
		flex-direction: column;
		justify-content: center;
		align-items: center;
		width: 48px;
		height: 48px;
		background: transparent;
		border: none;
		cursor: pointer;
		border-radius: 8px;
		transition: all 0.2s ease;
		position: relative;
	}

	.mobile-menu-btn:hover {
		background: rgba(var(--accent), 0.1);
	}

	.mobile-menu-btn span {
		width: 24px;
		height: 2px;
		background: rgb(var(--black));
		border-radius: 2px;
		transition: all 0.3s ease;
		margin: 3px 0;
	}

	.mobile-menu-btn.open span:nth-child(1) {
		transform: rotate(45deg) translate(6px, 6px);
	}

	.mobile-menu-btn.open span:nth-child(2) {
		opacity: 0;
	}

	.mobile-menu-btn.open span:nth-child(3) {
		transform: rotate(-45deg) translate(6px, -6px);
	}

	/* Mobile menu overlay */
	.mobile-menu-overlay {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: rgba(0, 0, 0, 0.5);
		opacity: 0;
		visibility: hidden;
		transition: all 0.3s ease;
		z-index: 1100;
	}

	.mobile-menu-overlay.open {
		opacity: 1;
		visibility: visible;
	}

	/* Mobile menu */
	.mobile-menu {
		position: fixed;
		top: 0;
		right: -100%;
		width: 280px;
		height: 100vh;
		background: white;
		transition: right 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
		z-index: 1200;
		display: flex;
		flex-direction: column;
	}

	.mobile-menu.open {
		right: 0;
	}

	.mobile-menu-header {
		display: flex;
		align-items: center;
		justify-content: space-between;
		padding: 1rem 1.5rem;
		border-bottom: 1px solid rgba(var(--gray-light), 0.3);
		min-height: 64px;
	}

	.mobile-menu-header h3 {
		margin: 0;
		font-size: 1.1rem;
		font-weight: 600;
		color: rgb(var(--black));
	}

	.close-btn {
		width: 40px;
		height: 40px;
		background: transparent;
		border: none;
		cursor: pointer;
		border-radius: 6px;
		display: flex;
		align-items: center;
		justify-content: center;
		transition: all 0.2s ease;
		color: rgb(var(--black));
	}

	.close-btn:hover {
		background: rgba(var(--accent), 0.1);
		color: rgb(var(--accent));
	}

	.mobile-menu-content {
		flex: 1;
		padding: 1rem 0;
	}

	.mobile-menu-content a {
		display: block;
		padding: 1rem 1.5rem;
		color: rgb(var(--black));
		text-decoration: none;
		font-weight: 500;
		transition: all 0.2s ease;
		border-left: 3px solid transparent;
	}

	.mobile-menu-content a:hover {
		background: rgba(var(--accent), 0.08);
		color: rgb(var(--accent));
		border-left-color: rgba(var(--accent), 0.3);
	}

	.mobile-menu-content a.active {
		background: rgba(var(--accent), 0.12);
		color: rgb(var(--accent));
		border-left-color: rgb(var(--accent));
	}

	/* Responsive styles */
	@media (min-width: 769px) {
		.mobile-menu-btn,
		.mobile-menu,
		.mobile-menu-overlay {
			display: none;
		}
	}

	@media (max-width: 768px) {
		.desktop-only {
			display: none;
		}
		
		.mobile-menu-btn {
			display: flex;
		}
	}

	@media (max-width: 480px) {
		nav {
			padding: 0 0.75rem;
			min-height: 56px;
		}
		
		.nav-brand h2 {
			font-size: 1.1rem;
		}
		
		.mobile-menu {
			width: 100vw;
		}
		
		.mobile-menu-content a {
			padding: 1.25rem 1rem;
			font-size: 1.05rem;
		}
	}
</style>
